import numpy as np
from io import StringIO
def string2Array(s):
    s = s.strip()

    # String case (elements quoted, no commas, arbitrary newlines)
    if "'" in s or '"' in s:
        # Remove brackets & quotes, collapse all whitespace to single spaces,
        # then parse as a single whitespace-delimited row of strings.
        payload = (
            s.replace('[', ' ').replace(']', ' ')
             .replace("'", ' ').replace('"', ' ')
        )
        payload = ' '.join(payload.split())
        arr = np.loadtxt(StringIO(payload), dtype=str, comments=None)
        return np.atleast_1d(arr)

    # Numeric case (works for 1D or 2D pretty-printed arrays)
    txt = s.replace('[', '').replace(']', '')
    try:
        return np.loadtxt(StringIO(txt), dtype=float, comments=None)
    except ValueError:
        # If wrapping caused uneven rows, flatten newlines to a single row
        txt_one_line = ' '.join(txt.split())
        return np.loadtxt(StringIO(txt_one_line), dtype=float, comments=None)

from sklearn.linear_model import BayesianRidge


def test_input(pred_input):
	obj_ins = BayesianRidge(n_iter = 300, tol = 0.001, alpha_1 = 1e-06, alpha_2 = 1e-06, lambda_1 = 1e-06, lambda_2 = 1e-06, compute_score = False, fit_intercept = True, normalize = False, copy_X = True, verbose = False)
	obj_ins_pred = BayesianRidge(n_iter = pred_input['self']['n_iter'], tol = pred_input['self']['tol'], alpha_1 = pred_input['self']['alpha_1'], alpha_2 = pred_input['self']['alpha_2'], lambda_1 = pred_input['self']['lambda_1'], lambda_2 = pred_input['self']['lambda_2'], compute_score = pred_input['self']['compute_score'], fit_intercept = pred_input['self']['fit_intercept'], normalize = pred_input['self']['normalize'], copy_X = pred_input['self']['copy_X'], verbose = pred_input['self']['verbose'])
	assert obj_ins.fit(X = string2Array('[[2.92774798e-01 2.98488317e-01 7.92756398e-01 5.48708798e-01\n  9.97556379e-01]\n [9.00916079e-01 5.31096494e-01 3.49690957e-01 7.17320134e-01\n  3.72239118e-02]\n [6.76976308e-01 1.61881544e-01 1.16796566e-01 3.61475091e-01\n  9.47310890e-01]\n [5.52716902e-01 6.69927990e-01 5.72002254e-01 3.80750653e-01\n  9.00281268e-01]\n [5.92063093e-01 1.66177307e-01 1.96740563e-01 8.36583508e-01\n  3.67024378e-01]\n [2.40289612e-01 2.20944652e-02 3.25933815e-01 2.08141899e-01\n  8.21176377e-02]\n [8.72516007e-01 6.78911983e-01 8.72217370e-01 2.84996983e-01\n  4.09016895e-02]\n [9.16318996e-01 4.45582621e-01 3.93594072e-02 4.07805959e-01\n  7.05717731e-01]\n [2.58244940e-01 9.36192485e-01 9.45175962e-01 6.95559142e-01\n  5.38724506e-01]\n [9.15333494e-01 6.74960365e-01 2.41175793e-01 5.03152137e-01\n  2.67377636e-01]\n [3.04706874e-01 4.37456964e-01 8.67675747e-01 4.10837874e-03\n  6.06282521e-01]\n [3.80384330e-01 7.30571838e-01 6.43354129e-01 5.73973325e-02\n  8.32727496e-01]\n [1.41454573e-01 6.75489613e-01 4.19306983e-01 2.42497980e-03\n  8.13250587e-01]\n [4.58113972e-02 2.87892447e-01 3.84747556e-01 7.31045407e-02\n  4.61175103e-01]\n [2.69800481e-01 1.69781515e-04 8.20607731e-01 8.35075811e-01\n  5.94843424e-01]\n [8.03209264e-01 2.66983023e-01 9.14784311e-01 1.94909835e-01\n  9.18705306e-01]\n [6.30392658e-01 1.70599699e-01 7.72373721e-01 7.64169385e-01\n  9.38734241e-01]\n [6.60638942e-01 1.85691685e-01 9.01519525e-01 4.00164472e-01\n  1.95456616e-01]\n [9.86681262e-01 9.70983643e-01 7.64234701e-01 4.79409490e-01\n  2.03021296e-01]\n [1.71973702e-01 9.06110211e-01 8.67724092e-02 3.11713975e-01\n  8.02265004e-01]\n [6.32817205e-01 7.89347078e-01 7.20973513e-01 6.09048035e-01\n  2.57887253e-01]\n [9.62803256e-01 8.01504354e-01 7.40855385e-01 3.96804048e-01\n  4.76728673e-01]\n [7.69869611e-01 2.32758474e-01 1.66781726e-02 1.70748978e-01\n  9.26419408e-02]\n [3.25593286e-01 2.56124886e-01 4.12852685e-01 8.68420023e-01\n  1.48907593e-04]\n [6.78120073e-01 9.50624010e-01 9.32086481e-01 3.05437945e-01\n  3.38954508e-01]\n [6.52672451e-01 8.36406611e-01 7.42741489e-01 6.52052442e-01\n  9.84348795e-01]\n [3.94000857e-01 9.38411017e-02 6.40621729e-01 5.99050842e-01\n  8.09609431e-01]\n [9.11803062e-01 2.43865083e-01 4.43159518e-01 2.38331138e-01\n  3.56519432e-01]\n [7.82587380e-01 2.17748748e-01 9.23861760e-01 1.17051633e-01\n  7.38258535e-01]\n [1.46290069e-02 2.34886658e-01 9.18568352e-01 8.64511405e-02\n  8.65683516e-01]\n [4.72542093e-01 7.09180918e-01 9.00111641e-02 1.94689446e-01\n  5.56655463e-02]\n [6.76938626e-01 5.29177783e-01 8.73486844e-01 6.43299137e-01\n  9.24139236e-01]\n [1.31986439e-01 3.39990424e-01 1.66761031e-01 7.39354353e-02\n  6.63413086e-03]\n [9.76482446e-01 6.74547700e-01 7.99101533e-01 5.64686758e-01\n  7.08714836e-01]\n [8.15713213e-01 8.25975543e-03 2.03402258e-01 7.65593491e-01\n  7.31736139e-01]\n [8.39371985e-01 4.82765216e-01 6.57123351e-01 9.04462676e-01\n  6.17570156e-01]\n [9.81685846e-01 9.39447869e-02 5.59159772e-01 9.87478568e-01\n  4.33240090e-01]\n [2.68452827e-01 3.90767558e-01 4.20887719e-01 6.40693547e-01\n  4.56408527e-02]\n [3.62430882e-01 8.88565181e-01 6.82838495e-01 1.00006724e-01\n  1.47319331e-01]\n [8.42498025e-01 8.91839730e-01 4.06722853e-01 5.09202730e-01\n  8.93829214e-01]\n [1.72936784e-01 4.00419784e-01 7.40003215e-01 7.08725823e-01\n  6.01009616e-01]\n [7.52707224e-01 9.08750519e-02 5.67253882e-01 4.72727895e-01\n  9.02501887e-02]\n [8.54518159e-01 2.15337777e-01 9.14815381e-02 3.21081432e-03\n  3.30190151e-01]\n [2.92114597e-02 6.68741181e-01 2.37109165e-01 9.66186279e-01\n  4.22980090e-01]\n [7.94408500e-01 6.35871742e-01 4.88369068e-01 4.57106555e-02\n  4.73796150e-01]\n [4.57208358e-02 4.09804077e-02 5.92221618e-01 8.90416385e-01\n  4.17801321e-01]\n [9.50915338e-01 2.72006480e-01 9.86616066e-01 2.89094834e-01\n  6.84120485e-01]\n [4.92362269e-01 6.13695081e-01 2.97715517e-01 3.38513105e-01\n  7.40846468e-01]\n [8.31956828e-01 8.89750386e-01 2.32575760e-01 5.99112485e-01\n  1.10767541e-01]\n [5.96969046e-01 1.11061487e-01 3.78628057e-01 2.69806157e-01\n  6.09137018e-01]]'), y = string2Array('[1.55094532 1.51509015 1.42814667 1.74350836 0.94729789 1.35154317\n 2.45384959 1.53830407 1.50565374 1.64696167 2.14884298 1.96971268\n 1.55901974 1.3585489  1.2635737  2.52615134 1.65505817 2.18185729\n 2.28846163 0.95575337 1.7540585  2.31865585 1.62417011 0.88243095\n 2.31143356 1.74500702 1.43752218 2.12337741 2.59504948 1.8706125\n 1.35748357 1.91275504 1.20960501 2.21688903 1.25505121 1.59440065\n 1.54690166 1.05291564 1.93702111 1.72756455 1.20901153 1.86256265\n 1.93124492 0.27557396 2.25358653 0.76042709 2.67001225 1.45777423\n 1.47363787 1.68618406]'))==obj_ins_pred.fit(X = pred_input['args']['X'], y = pred_input['args']['y']), 'Prediction failed!'
 
