{
    "Pillow.src.PIL.ImageFile._seek_check": "def _seek_check(self, frame):\n    if (\n        frame < self._min_frame\n        # Only check upper limit on frames if additional seek operations\n        # are not required to do so\n        or (\n            not (hasattr(self, \"_n_frames\") and self._n_frames is None)\n            and frame >= self.n_frames + self._min_frame\n        )\n    ):\n        msg = \"attempt to seek outside sequence\"\n        raise EOFError(msg)\n\n    return self.tell() != frame",
    "Pillow.src.PIL.PcxImagePlugin._open": "def _open(self) -> None:\n    # header\n    assert self.fp is not None\n\n    s = self.fp.read(128)\n    if not _accept(s):\n        msg = \"not a PCX file\"\n        raise SyntaxError(msg)\n\n    # image\n    bbox = i16(s, 4), i16(s, 6), i16(s, 8) + 1, i16(s, 10) + 1\n    if bbox[2] <= bbox[0] or bbox[3] <= bbox[1]:\n        msg = \"bad PCX image size\"\n        raise SyntaxError(msg)\n    logger.debug(\"BBox: %s %s %s %s\", *bbox)\n\n    # format\n    version = s[1]\n    bits = s[3]\n    planes = s[65]\n    provided_stride = i16(s, 66)\n    logger.debug(\n        \"PCX version %s, bits %s, planes %s, stride %s\",\n        version,\n        bits,\n        planes,\n        provided_stride,\n    )\n\n    self.info[\"dpi\"] = i16(s, 12), i16(s, 14)\n\n    if bits == 1 and planes == 1:\n        mode = rawmode = \"1\"\n\n    elif bits == 1 and planes in (2, 4):\n        mode = \"P\"\n        rawmode = \"P;%dL\" % planes\n        self.palette = ImagePalette.raw(\"RGB\", s[16:64])\n\n    elif version == 5 and bits == 8 and planes == 1:\n        mode = rawmode = \"L\"\n        # FIXME: hey, this doesn't work with the incremental loader !!!\n        self.fp.seek(-769, io.SEEK_END)\n        s = self.fp.read(769)\n        if len(s) == 769 and s[0] == 12:\n            # check if the palette is linear grayscale\n            for i in range(256):\n                if s[i * 3 + 1 : i * 3 + 4] != o8(i) * 3:\n                    mode = rawmode = \"P\"\n                    break\n            if mode == \"P\":\n                self.palette = ImagePalette.raw(\"RGB\", s[1:])\n        self.fp.seek(128)\n\n    elif version == 5 and bits == 8 and planes == 3:\n        mode = \"RGB\"\n        rawmode = \"RGB;L\"\n\n    else:\n        msg = \"unknown PCX mode\"\n        raise OSError(msg)\n\n    self._mode = mode\n    self._size = bbox[2] - bbox[0], bbox[3] - bbox[1]\n\n    # Don't trust the passed in stride.\n    # Calculate the approximate position for ourselves.\n    # CVE-2020-35653\n    stride = (self._size[0] * bits + 7) // 8\n\n    # While the specification states that this must be even,\n    # not all images follow this\n    if provided_stride != stride:\n        stride += stride % 2\n\n    bbox = (0, 0) + self.size\n    logger.debug(\"size: %sx%s\", *self.size)\n\n    self.tile = [(\"pcx\", bbox, self.fp.tell(), (rawmode, planes * stride))]"
}