{
    "scikit-learn.sklearn.feature_extraction.text._count_vocab": "def _count_vocab(self, raw_documents, fixed_vocab):\n    \"\"\"Create sparse feature matrix, and vocabulary where fixed_vocab=False\"\"\"\n    if fixed_vocab:\n        vocabulary = self.vocabulary_\n    else:\n        # Add a new value when a new vocabulary item is seen\n        vocabulary = defaultdict()\n        vocabulary.default_factory = vocabulary.__len__\n\n    analyze = self.build_analyzer()\n    j_indices = []\n    indptr = []\n\n    values = _make_int_array()\n    indptr.append(0)\n    for doc in raw_documents:\n        feature_counter = {}\n        for feature in analyze(doc):\n            try:\n                feature_idx = vocabulary[feature]\n                if feature_idx not in feature_counter:\n                    feature_counter[feature_idx] = 1\n                else:\n                    feature_counter[feature_idx] += 1\n            except KeyError:\n                # Ignore out-of-vocabulary items for fixed_vocab=True\n                continue\n\n        j_indices.extend(feature_counter.keys())\n        values.extend(feature_counter.values())\n        indptr.append(len(j_indices))\n\n    if not fixed_vocab:\n        # disable defaultdict behaviour\n        vocabulary = dict(vocabulary)\n        if not vocabulary:\n            raise ValueError(\n                \"empty vocabulary; perhaps the documents only contain stop words\"\n            )\n\n    if indptr[-1] > np.iinfo(np.int32).max:  # = 2**31 - 1\n        if _IS_32BIT:\n            raise ValueError(\n                (\n                    \"sparse CSR array has {} non-zero \"\n                    \"elements and requires 64 bit indexing, \"\n                    \"which is unsupported with 32 bit Python.\"\n                ).format(indptr[-1])\n            )\n        indices_dtype = np.int64\n\n    else:\n        indices_dtype = np.int32\n    j_indices = np.asarray(j_indices, dtype=indices_dtype)\n    indptr = np.asarray(indptr, dtype=indices_dtype)\n    values = np.frombuffer(values, dtype=np.intc)\n\n    X = sp.csr_matrix(\n        (values, j_indices, indptr),\n        shape=(len(indptr) - 1, len(vocabulary)),\n        dtype=self.dtype,\n    )\n    X.sort_indices()\n    return vocabulary, X",
    "scikit-learn.sklearn.feature_extraction.text._check_vocabulary": "def _check_vocabulary(self):\n    \"\"\"Check if vocabulary is empty or missing (not fitted)\"\"\"\n    if not hasattr(self, \"vocabulary_\"):\n        self._validate_vocabulary()\n        if not self.fixed_vocabulary_:\n            raise NotFittedError(\"Vocabulary not fitted or provided\")\n\n    if len(self.vocabulary_) == 0:\n        raise ValueError(\"Vocabulary is empty\")"
}