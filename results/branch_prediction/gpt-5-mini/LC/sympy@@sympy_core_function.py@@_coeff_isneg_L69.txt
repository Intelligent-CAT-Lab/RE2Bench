[THOUGHT]
The input expression cos(2*phi)/2 is a Mul in SymPy (it's cos(2*phi) * 1/2), not a MatMul. Therefore the first if (a.is_MatMul) is false (N). The second if (a.is_Mul) is true (Y), so a is replaced by its first argument (cos(2*phi)).
[/THOUGHT]

[ANSWER]
1 def _coeff_isneg(a):
2 
3     if a.is_MatMul: ## [BRANCH]taken=[N][/BRANCH]
4         a = a.args[0]
5     if a.is_Mul: ## [BRANCH]taken=[Y][/BRANCH]
6         a = a.args[0]
7     return a.is_Number and a.is_extended_negative
8