[THOUGHT]
text = ",wPzPppdl/" characters by index:
0: ',' -> isupper() False -> if not taken -> line 4: N, else taken -> line 6: Y
1: 'w' -> False -> line 4: N, line 6: Y
2: 'P' -> True  -> line 4: Y, line 6: N
3: 'z' -> False -> line 4: N, line 6: Y
4: 'P' -> True  -> line 4: Y, line 6: N
5: 'p' -> False -> line 4: N, line 6: Y
6: 'p' -> False -> line 4: N, line 6: Y
7: 'd' -> False -> line 4: N, line 6: Y
8: 'l' -> False -> line 4: N, line 6: Y
9: '/' -> False -> line 4: N, line 6: Y

So line 4 sequence: [N,N,Y,N,Y,N,N,N,N,N]
and line 6 sequence: [Y,Y,N,Y,N,Y,Y,Y,Y,Y]
[/THOUGHT]

[ANSWER]
1 def f(text):
2     out = ""
3     for i in range(len(text)):
4         if text[i].isupper(): ## [BRANCH]taken=[N,N,Y,N,Y,N,N,N,N,N][/BRANCH]
5             out += text[i].lower()
6         else: ## [BRANCH]taken=[Y,Y,N,Y,N,Y,Y,Y,Y,Y][/BRANCH]
7             out += text[i].upper()
8     return out
[/ANSWER]