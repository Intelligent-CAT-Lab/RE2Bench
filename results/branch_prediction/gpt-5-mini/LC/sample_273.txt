[THOUGHT]
name = ".NET"
After reversing (line 3): name = "TEN."
Loop over indices 0..3:
i=0: n='T' -> n != '.' is True and new_name.count('.') = 0 < 2 True => if taken (Y); new_name='T'
i=1: n='E' -> condition True => if taken (Y); new_name='ET'
i=2: n='N' -> condition True => if taken (Y); new_name='NET'
i=3: n='.' -> n != '.' is False (so whole condition False) => if not taken (N), else taken (Y) -> break
So the if condition is evaluated 4 times with outcomes [Y, Y, Y, N]. The else branch executes only on the last evaluation: [N, N, N, Y].
[/THOUGHT]

[ANSWER]
1 def f(name):
2     new_name =''
3     name = name[::-1]
4     for i in range(len(name)):
5         n = name[i]
6         if n !='.' and  new_name.count('.')<2: ## [BRANCH]taken=[Y,Y,Y,N][/BRANCH]
7             new_name=n+new_name
8         else: ## [BRANCH]taken=[N,N,N,Y][/BRANCH]
9             break
10     return new_name
[/ANSWER]