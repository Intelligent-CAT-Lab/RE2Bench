[THOUGHT]
The function `split_super_sub` parses a string `text` looking for superscripts (starting with `^` or `__`) and subscripts (starting with `_`), separating the base `name`.

**Input Analysis:**
`text` = `"alpha^+_1"`
`len(text)` = 9.
Initial `pos` = 0.

**Loop Execution Trace (Line 15 `while pos < len(text)`):**

**Iteration 1:**
- **State at Line 15:** `pos` = 0. `len(text)` = 9. Condition `0 < 9` is True.
- Line 16: `start` = 1.
- Line 17: `text[0:2]` is "al". Not "__".
- Line 19: `pos_hat` searches for `^` starting at index 1. Found at index 5.
- Line 22: `pos_usc` searches for `_` starting at index 1. Found at index 7.
- Line 25: `pos_next` = `min(5, 7)` = 5.
- Line 26: `part` = `text[0:5]` = "alpha".
- Line 27: `pos` is updated to 5.
- Line 28: `name` is None, so `name` becomes "alpha".

**Iteration 2:**
- **State at Line 15:** `pos` = 5. `len(text)` = 9. Condition `5 < 9` is True.
- Line 16: `start` = 6.
- Line 17: `text[5:7]` is "^+". Not "__".
- Line 19: `pos_hat` searches for `^` starting at index 6. Not found ("^+_1" is at indices 5-8, searching from 6 covers "+_1"). Returns -1.
- Line 20-21: `pos_hat` becomes `len(text)` = 9.
- Line 22: `pos_usc` searches for `_` starting at index 6. Found at index 7.
- Line 25: `pos_next` = `min(9, 7)` = 7.
- Line 26: `part` = `text[5:7]` = "^+".
- Line 27: `pos` is updated to 7.
- Line 30: `part` starts with `^`. " + " added to `supers`.

**Iteration 3:**
- **State at Line 15:** `pos` = 7. `len(text)` = 9. Condition `7 < 9` is True.
- Line 16: `start` = 8.
- Line 17: `text[7:9]` is "_1". Not "__".
- Line 19: `pos_hat` searches for `^` starting at index 8 ("1"). Not found. Becomes 9.
- Line 22: `pos_usc` searches for `_` starting at index 8. Not found. Returns -1.
- Line 23-24: `pos_usc` becomes 9.
- Line 25: `pos_next` = `min(9, 9)` = 9.
- Line 26: `part` = `text[7:9]` = "_1".
- Line 27: `pos` is updated to 9.
- Line 34: `part` starts with `_`. "1" added to `subs`.

**Iteration 4 (Condition Check):**
- **State at Line 15:** `pos` = 9. `len(text)` = 9. Condition `9 < 9` is False. Loop terminates.

**Variable States at Line 15:**
- `pos`: `[0, 5, 7, 9]`
- `len(text)`: `[9, 9, 9, 9]`
[/THOUGHT]

[ANSWER]
1 from __future__ import print_function, division
2 import re
3 import collections
4 
5 _name_with_digits_p = re.compile(r'^([a-zA-Z]+)([0-9]+)$')
6 
7 def split_super_sub(text):
8     if len(text) == 0:
9         return text, [], []
10 
11     pos = 0
12     name = None
13     supers = []
14     subs = []
15     while pos < len(text):## [STATE]pos=[0, 5, 7, 9][/STATE] [STATE]len(text)=[9, 9, 9, 9][/STATE]
16         start = pos + 1
17         if text[pos:pos + 2] == "__":
18             start += 1
19         pos_hat = text.find("^", start)
20         if pos_hat < 0:
21             pos_hat = len(text)
22         pos_usc = text.find("_", start)
23         if pos_usc < 0:
24             pos_usc = len(text)
25         pos_next = min(pos_hat, pos_usc)
26         part = text[pos:pos_next]
27         pos = pos_next
28         if name is None:
29             name = part
30         elif part.startswith("^"):
31             supers.append(part[1:])
32         elif part.startswith("__"):
33             supers.append(part[2:])
34         elif part.startswith("_"):
35             subs.append(part[1:])
36         else:
37             raise RuntimeError("This should never happen.")
38 
39     m = _name_with_digits_p.match(name)
40     if m:
41         name, sub = m.groups()
42         subs.insert(0, sub)
43 
44     return name, supers, subs
[/ANSWER]